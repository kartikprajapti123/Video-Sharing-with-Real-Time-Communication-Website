<VirtualHost *:8080>
    ServerName shareyourclips.online
    ServerAlias www.shareyourclips.online
    ServerAdmin kartikprajapati26122004@gmail.com

    # Redirect HTTP to HTTPS
    Redirect permanent / https://www.shareyourclips.online/

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:8443>
    ServerName shareyourclips.online
    ServerAlias www.shareyourclips.online

    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/fullchain.pem
    SSLCertificateKeyFile /etc/ssl/private/privkey.pem

    # Ensure DocumentRoot points to the correct location
    DocumentRoot /app

    # WSGI Configuration for Django
    WSGIDaemonProcess jerry_project python-path=/app
WSGIProcessGroup jerry_project
WSGIScriptAlias / /app/jerry_project/wsgi.py




    <Directory /app/jerry_project>
        Require all granted
    </Directory>

    # Alias for static files
    Alias /static /app/static
    <Directory /app/static>
        Require all granted
    </Directory>

    # Alias for media files
    Alias /media /app/media
    <Directory /app/media>
        Require all granted
    </Directory>

    # WebSocket proxy settings (if using Django Channels for WebSockets)
    RewriteEngine on
    RewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC,OR]
    RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
    RewriteRule .* wss://shareyourclips.online:8002%{REQUEST_URI} [P,QSA,L]

    ProxyPass /wss/ wss://shareyourclips.online:8002/
    ProxyPassReverse /wss/ wss://shareyourclips.online:8002/

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>
