<VirtualHost *:80>
    ServerName www.shareyourclips.online
    ServerAdmin kartikprajapati26122004@gmail.com

    # Error and access logs
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    # Alias for static and media files
    Alias /static /var/www/Jerry-Project/staticfiles
    <Directory /var/www/Jerry-Project/staticfiles>
        Require all granted
    </Directory>

    Alias /media /var/www/Jerry-Project/media
    <Directory /var/www/Jerry-Project/media>
        Require all granted
    </Directory>

    # WSGI configuration
    <Directory /var/www/Jerry-Project/Jerry-Project>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    WSGIDaemonProcess jerry_project python-home=/var/www/Jerry-Project/venv python-path=/var/www/Jerry-Project
    WSGIProcessGroup jerry_project
    WSGIScriptAlias / /var/www/Jerry-Project/Jerry-Project/wsgi.py

    # WebSocket proxy settings
    RewriteEngine on
    RewriteCond %{HTTP:UPGRADE} ^WebSocket$ [NC,OR]
    RewriteCond %{HTTP:CONNECTION} ^Upgrade$ [NC]
    RewriteRule .* wss://shareyourclips.online:8001%{REQUEST_URI} [P,QSA,L]

    ProxyPass /wss/ wss://shareyourclips.online:8001/
    ProxyPassReverse /wss/ wss://shareyourclips.online:8001/

    # Redirect HTTP to HTTPS
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^shareyourclips\.online [NC]
    RewriteRule ^(.*)$ https://www.shareyourclips.online$1 [R=301,L]

    RewriteCond %{HTTPS} off
    RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>
