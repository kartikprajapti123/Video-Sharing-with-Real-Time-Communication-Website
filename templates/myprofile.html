{% extends "base.html" %}
{% block title %}
MyProfile
{% endblock title %}
{% block link %}

{% endblock link %}
{% block body %}

<div id="all-page-content">

	
	<!-- Breadcrumb -->
<div class="breadcrumb-bar breadcrumb-bar-info" style="margin-top: 74px;">
	<div class="container">
		<div class="row">
			<div class="col-md-12 col-12">
				<div class="breadcrumb-list">
					<h2 class="breadcrumb-title">My Profile</h2>
					<nav aria-label="breadcrumb" class="page-breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="index.html">Home</a></li>
							<li class="breadcrumb-item active" aria-current="page">My Profile</li>
						</ol>
					</nav>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Breadcrumb -->

<!-- Page Content -->
<div class="page-content">
	<div class="container">
		<div class="row">
			
			<!-- sidebar -->
			<div class="col-xl-3 col-lg-3 theiaStickySidebar">
				<div class="settings-widget dash-profile">
					<div class="settings-menu">
						<div class="profile-bg">
							<div class="profile-img">
								<a href="/myprofile/"  class="profile-update" id="profile_picture_link2"><img id="profile_page_image"
									src="/media/profile_pictures/default_profile_image.png" alt="Img"></a>
							</div>
						</div>
						<div class="profile-group">
							<div class="profile-name text-center">
								<h4 id="profile_page_username2"> Username</h4>
								<a href="#" class="add-course btn-primary" id="share-button">
									<i class="fas fa-share-alt"></i> Share Profile URL
								</a>
								<a href="/upload-video/" class="add-course btn-primary">
									<i class="fas fa-upload"></i> Upload New Video
								  </a>
							</div>
						</div>
					</div>
				</div>
				<div class="settings-widget account-settings">
					<div class="settings-menu">
						<h3>Creators' Corner</h3>
						<ul>
							<li class="nav-item">
								<a href="/creator/" class="nav-link" id="creator_check">
								</a>
							</li>
							<li class="nav-item active">
								<a href="/myprofile/" class="nav-link profile-update">
									<i class="bx bxs-user"></i>My Profile
								</a>
							</li>
							
							<li class="nav-item">
								<a href="/myvideo/" class="nav-link">
									<i class="bx bxs-tachometer"></i>My Videos
								</a>
							</li>
							<!-- <li class="nav-item">
								<a href="instructor-enrolled-course.html" class="nav-link">
									<i class="bx bxs-graduation"></i>Enrolled Courses
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-wishlist.html" class="nav-link">
									<i class="bx bxs-heart"></i>Wishlist
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-reviews.html" class="nav-link">
									<i class="bx bxs-star"></i>Reviews
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-quiz.html" class="nav-link">
									<i class="bx bxs-shapes"></i>My Quiz Attempts
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-orders.html" class="nav-link">
									<i class="bx bxs-cart"></i>Order History
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-qa.html" class="nav-link">
									<i class="bx bxs-bookmark-alt"></i>Question & Answer
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-referral.html" class="nav-link">
									<i class="bx bxs-user-plus"></i>Referrals
								</a>
							</li> -->
							<li class="nav-item">
								<a href="/contact-list/" class="nav-link">
									<i class="bx bxs-chat"></i>Messages
								</a>
							</li>
							
							<!-- <li class="nav-item">
								<a href="instructor-notifications.html" class="nav-link">
									<i class="bx bxs-bell"></i>Notifications
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-tickets.html" class="nav-link">
									<i class="bx bxs-coupon"></i>Support Tickets
								</a>
							</li> -->
						</ul>
						<!-- <h3>Instructor</h3>
						<ul>
							<li class="nav-item">
								<a href="instructor-course.html" class="nav-link ">
									<i class="bx bxs-rocket"></i>My Courses
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-announcements.html" class="nav-link">
									<i class="bx bxs-volume-full"></i>Announcements
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-withdraw.html" class="nav-link ">
									<i class="bx bxs-wallet"></i>Withdrawls
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-quiz-attempts.html" class="nav-link">
									<i class="bx bxs-shapes"></i>Quiz Attempts
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-assignment.html" class="nav-link ">
									<i class="bx bxs-file"></i>Assignments
								</a>
							</li>
							<li class="nav-item">
								<a href="instructor-earnings.html" class="nav-link">
									<i class="bx bxs-badge-dollar"></i>Earnings
								</a>
							</li>
						</ul> -->
						<h3>Account Settings</h3>
						<ul>
							<li class="nav-item">
								<a href="/mychangepassword/" class="nav-link ">
									<i class="bx bxs-cog"></i>Change Password
								</a>
							</li>
							<li class="nav-item">
								<div  class="nav-link" onClick="LogoutApi()"><a href="#">

									<i class="bx bxs-log-out"></i>Logout
								</a>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- /Sidebar -->
			
			<!-- Instructor profile -->
			<div class="col-xl-9 col-lg-9">

				<div class="settings-widget card-details mb-0">
					<div class="settings-menu p-0">
						<div class="profile-heading" style="display: flex;
    justify-content: space-between;
    align-items: center;">
							<h3>My Profile</h3>
							<ul class="nav">
								<li  >
									<a href="/myprofileedit/" class="btn btn-black" style="color: #ffffff;
    background: #ff4667;
    border: none;">Edit</a>
								</li>
								<!-- <li>
									<a href="javascript:void(0);" class="btn btn-success-dark" id="post_save" style="height: 50px;">Save</a>
								</li> -->
							</ul>
						</div>
						<div class="checkout-form personal-address">
							<div class="row">
								<div class="col-sm-6">
									<div class="contact-info">
										<h6>User Name</h6>
										<p id="profile_page_username">Not Provided</p>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="contact-info">
										<h6>First Name</h6>
										<p id="profile_page_firstname">Not Provided</p>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="contact-info">
										<h6>Last Name</h6>
										<p id="profile_page_lastname">Not Provided</p>
									</div>
								</div>


								<div class="col-sm-6">
									<div class="contact-info">
										<h6>Email</h6>
										<p id="profile_page_email">Not Provided</p>
									</div>
								</div>
								<div class="col-sm-12">
									<div class="contact-info mb-0">
										<h6>Bio</h6>
										<p id="profile_page_bio">Not Provided</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
			<!-- /Instructor profile -->
			
		</div>
	</div>
</div>
</div>
<!-- /Page Content -->
{% endblock body %}

{% block script %}
<script>
	const profile_authenticated = localStorage.getItem("jerry_project_access_token")
	if (profile_authenticated) {

		console.log("called")
		let token = profile_authenticated
		userApi = async () => {
			await fetch(`${window.location.origin}/api/user/`, {
				"method": "get",
				"headers": {
					"content-type": "application/json",
					"Authorization": `Bearer ${token}`
				}
			}).then((response) => {
				return response.json()
			}).then((response) => {
				 
				if (response.success) {
					console.log(response.data.profile_picture)
					if (response.data.profile_picture==""){
						document.getElementById("profile_page_image").src = '/media/profile_pictures/default_profile_image.png'
						
					}
					else{

						document.getElementById("profile_page_image").src = `${response.data.profile_picture}`
					}


					console.log(response.data.username)
					if (response.data.username == "") {
						document.getElementById("profile_page_username").innerHTML = "Not Provided"
						//document.getElementById("profile_page_username2").innerHTML = "username"
					}
					else {
						document.getElementById("profile_page_username").innerHTML = `${response.data.username}`
						//document.getElementById("profile_page_username2").innerHTML = `@${response.data.username.length > 14 ? `${response.data.username.substring(0, 14)}...` : response.data.username}`;




					}

					if (response.data.email == "") {
						document.getElementById("profile_page_email").innerHTML = "Not Provided"

					}
					else {

						document.getElementById("profile_page_email").innerHTML = `${response.data.email}`
					}
					if (response.data.first_name == "") {
						document.getElementById("profile_page_firstname").innerHTML = "Not Provided"

					}
					else {

						document.getElementById("profile_page_firstname").innerHTML = `${response.data.first_name}`
					}

					if (response.data.last_name == "") {
						document.getElementById("profile_page_lastname").innerHTML = "Not Provided"

					}
					else {

						document.getElementById("profile_page_lastname").innerHTML = `${response.data.last_name}`
					}

					if (response.data.bio == "") {
						document.getElementById("profile_page_bio").innerHTML = "Not Provided"

					}
					else {

						document.getElementById("profile_page_bio").innerHTML = `${response.data.bio}`
					}



				}
				console.log(response)
			})
		}
		userApi()

		

	} else {
		console.log("you are not logged in ")
	}
</script>
{% endblock script %}