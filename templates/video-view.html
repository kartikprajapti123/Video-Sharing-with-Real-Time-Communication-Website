{% extends "base.html" %}
{% block title %}
  Video-View
{% endblock title %}
{% block style %}
<style>
	:root {
		--plyr-color-main: #ff4667;
		/* Main color for the controls */
		--plyr-control-color: #ff4667;
		/* Color for the control icons */
		--plyr-control-background-hover: #fae2e0;
		/* Background color on hover */
		--plyr-control-background: #fae2e0;
		/* Background color for controls */
		--plyr-time-display-color: #ff4667;
		/* Color for the time display */
	}

	/* Additional customization for light link-like color */
	.plyr--video .plyr__controls button {
		color: #fae2e0;
		/* Change this to your desired light link color */
	}
	.plyr--fullscreen .responsive-video {
		width: 100%;
		height: 100%; /* Use the full height in fullscreen mode */
	}.responsive-video {
		width: 100%;
		height: auto; /* Maintain aspect ratio */
		object-fit: contain;
		object-position: center;
	}
	.plyr__controls__item.plyr__control--volume {
		max-width: 200px; /* Adjust this value to reduce/increase the width */
	}
	
	/* Make sure the progress bar has a full width */
	.plyr__controls__item.plyr__progress {
		flex-grow: 1; /* Ensure the progress bar takes more space */
	}
</style>
{% endblock style %}
{% block link %}
<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
{% endblock link %}
{% block body %}

<!-- Breadcrumb -->
<div class="breadcrumb-bar" style="margin-top: 100px;">
	<div class="container">
		<div class="row">
			<div class="col-md-12 col-12">
				<div class="breadcrumb-list">
					<nav aria-label="breadcrumb" class="page-breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="/">Home</a></li>
							<li class="breadcrumb-item" aria-current="page"> <a href="/myvideo/">My Videos</a></li>
							<!-- <li class="breadcrumb-item" aria-current="page">All posts</li> -->
							<li class="breadcrumb-item" aria-current="page" id="post_view_title2"></li>
						</ol>
					</nav>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Breadcrumb -->

<!-- Inner Banner -->
<div class="inner-banner">
	<div class="container">
		<div class="row">
			<div class="col-lg-8">
				<div class="instructor-wrap border-bottom-0 m-0">
					<div class="about-instructor align-items-center">
						<div class="abt-instructor-img">
							<a href="#" id="post_view_user_profile_link"><img src="/static/img/user/user1.jpg" alt="img"
									class="img-fluid" id="post_view_user_profile_image"></a>
						</div>
						<div class="instructor-detail me-3">
							<h5><a href="#" id="post_view_user_profile_link_username"></a></h5>
							<!-- <p>UX/UI Designer</p> -->
						</div>
						<!-- <div class="rating mb-0">							
										<i class="fas fa-star filled"></i>
										<i class="fas fa-star filled"></i>
										<i class="fas fa-star filled"></i>
										<i class="fas fa-star filled"></i>
										<i class="fas fa-star"></i>
										<span class="d-inline-block average-rating"><span>4.5</span> (15)</span>
									</div> -->
					</div>
					<!-- <span class="web-badge mb-3" >WEB DEVELPMENT</span> -->
				</div>
				<h2 id="post_view_title"></h2>
				<p id="post_view_short_description"></p>
				<div class="course-info d-flex align-items-center border-bottom-0 m-0 p-0">
					<!-- <div class="cou-info">
									<img src="/static/img/icon/icon-01.svg" alt="Img">
									<p>12+ Lesson</p>
								</div> -->
					<div class="cou-info">
						<!-- <img src="/static/img/icon/timer-icon.svg" alt="Img"> -->
						<!-- <p id="post_view_time"></p> -->
					</div>
					<!-- <div class="cou-info">
						<img src="/static/img/icon/people.svg" alt="Img">
						<p id="post_view_user_purchased_number">0 Purchased</p>
					</div> -->
				</div>
			</div>
		</div>
	</div>
</div>
<!-- /Inner Banner -->

<!-- Course Content -->
<section class="page-content course-sec">
	<div class="container">

		<div class="row">
			<div class="col-lg-8">

				<!-- Overview -->
				<div class="card overview-sec">
					<div class="card-body" id="post_view_description">

					</div>
				</div>
				<!-- /Overview -->

				<!-- Course Content -->
				<!-- <div class="card content-sec" >
								<div class="card-body">
									<div class="row">
										<div class="col-sm-6">
											<h5 class="subs-title">Course Content</h5>
										</div>
										<div class="col-sm-6 text-sm-end">
											<h6>92 Lectures 10:56:11</h6>
										</div>
									</div>
									<div class="course-card">
										<h6 class="cou-title">
											<a class="collapsed" data-bs-toggle="collapse" href="#collapseOne" aria-expanded="false">In which areas do you operate?</a>
										</h6>
										<div id="collapseOne" class="card-collapse collapse" style="">
											<ul>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.1 Introduction to the User Experience Course</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.2 Exercise: Your first design challenge</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.5 How to use text layers effectively</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
											</ul>
										</div>
									</div>
									<div class="course-card">
										<h6 class="cou-title">
											<a class="collapsed" data-bs-toggle="collapse" href="#course2" aria-expanded="false">The Brief</a>
										</h6>
										<div id="course2" class="card-collapse collapse" style="">
											<ul>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.1 Introduction to the User Experience Course</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.2 Exercise: Your first design challenge</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.5 How to use text layers effectively</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
											</ul>
										</div>
									</div>
									<div class="course-card">
										<h6 class="cou-title">
											<a class="collapsed" data-bs-toggle="collapse" href="#course3" aria-expanded="false">Wireframing Low Fidelity</a>
										</h6>
										<div id="course3" class="card-collapse collapse" style="">
											<ul>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.1 Introduction to the User Experience Course</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.2 Exercise: Your first design challenge</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture1.5 How to use text layers effectively</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
											</ul>
										</div>
									</div>
									<div class="course-card">
										<h6 class="cou-title mb-0">
											<a class="collapsed" data-bs-toggle="collapse" href="#coursefour" aria-expanded="false">Type, Color & Icon Introduction</a>
										</h6>
										<div id="coursefour" class="card-collapse collapse" style="">
											<ul>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture4.1 Introduction to the User Experience Course</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture4.2 Exercise: Your first design challenge</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture4.3 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture4.4 How to solve the previous exercise</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
												<li>
													<p><img src="/static/img/icon/play.svg" alt="Img" class="me-2">Lecture4.5 How to use text layers effectively</p>
													<div>
														<a href="javascript:void(0);">Preview</a>
														<span>02:53</span>
													</div>
												</li>
											</ul>
										</div>
									</div>
								</div>
							</div> -->
				<!-- /Course Content -->

				<!-- Instructor -->
				<div class="card instructor-sec">
					<div class="card-body">
						<h5 class="subs-title">About the Creator</h5>
						<div class="instructor-wrap">
							<div class="about-instructor">
								<div class="abt-instructor-img">
									<a href="#" id="post_view_user_link"><img src="" alt="img" class="img-fluid"
											id="post_view_user_image"></a>
								</div>
								<div class="instructor-detail">
									<h5><a href="" id="post_view_user_profile_link_username2">Nicole Brown</a></h5>
									<!-- <p>UX/UI Designer</p> -->
								</div>
							</div>
							<!-- <div class="rating">							
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star"></i>
											<span class="d-inline-block average-rating">4.5 Instructor Rating</span>
										</div> -->
						</div>
						<!-- <div class="course-info d-flex align-items-center">
										<div class="cou-info">
											<img src="/static/img/icon/play.svg" alt="Img">
											<p>5 Courses</p>
										</div>
										<div class="cou-info">
											<img src="/static/img/icon/icon-01.svg" alt="Img">
											<p>12+ Lesson</p>
										</div>
										<div class="cou-info">
											<img src="/static/img/icon/icon-02.svg" alt="Img">
											<p>9hr 30min</p>
										</div>
										<div class="cou-info">
											<img src="/static/img/icon/people.svg" alt="Img">
											<p>270,866 students enrolled</p>
										</div>
									</div> -->
						<!-- <p>UI/UX Designer, with 7+ Years Experience. Guarantee of High Quality Work.</p> -->
						<p id="post_view_bio"></p>


						<!-- <p>Available for:</p>
									<ul>
										<li>1. Full Time Office Work</li>
										<li>2. Remote Work</li>
										<li>3. Freelance</li>
										<li>4. Contract</li>
										<li>5. Worldwide</li>
									</ul> -->
					</div>
				</div>
				<!-- /Instructor -->

				<!-- Reviews -->
				<!-- <div class="card review-sec" id="main_comments">
					<h5 class="subs-title" style="padding: 0px;
    margin: 0px;
    margin-left: 22px;
    margin-top: 15px;
">Comments (<span id="reviews_count"></span>)</h5>
					<div class="card-body" id="post_reviews">
						<!-- <div class="instructor-wrap">
							<div class="about-instructor">
								<div class="abt-instructor-img">
									<a href="instructor-profile.html"><img src="/static/img/user/user1.jpg" alt="img"
											class="img-fluid"></a>
								</div>
								<div class="instructor-detail">
									<h5><a href="instructor-profile.html">Nicole Brown</a></h5>
									<p>UX/UI Designer</p>
								</div>
							</div>
							<div class="rating">							
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star filled"></i>
											<i class="fas fa-star"></i>
											<span class="d-inline-block average-rating">4.5 Instructor Rating</span>
										</div>
						</div>
						<p class="rev-info">“ This is the second Photoshop course I have completed with Cristian. Worth
							every penny and recommend it highly. To get the most out of this course, its best to to take
							the Beginner to Advanced course first. The sound and video quality is of a good standard.
							Thank you Cristian. “</p>
						<a href="javascript:void(0);" class="btn btn-reply"><i class="feather-corner-up-left"></i>
							Reply</a> -->
				<!-- </div> -->
				<!-- </div> -->
				<!-- /Reviews -->

				<!-- Comment -->
				<!-- <div class="card comment-sec"> -->
				<!-- <div class="card-body"> -->
				<!-- <h5 class="subs-title">Post A comment</h5> -->
				<!-- <form> -->
				<!-- <div class="row"> -->
				<!-- <div class="col-md-6"> -->
				<!-- <div class="input-block">
										<input type="text" class="form-control" placeholder="Full Name" id="post_username">
									</div> -->
				<!-- </div> -->
				<!-- <div class="col-md-6"> -->
				<!-- <div class="input-block">
										<input type="email" class="form-control" placeholder="Email (Optional)" id="post_email">
									</div> -->
				<!-- </div> -->
				<!-- </div> -->
				<!-- <div class="input-block"> -->
				<!-- <input type="text" class="form-control" placeholder="Subject" id="post_subject"> -->
				<!-- </div> -->
				<!-- <div class="input-block">
								<textarea rows="4" class="form-control" placeholder="Your Comments"
									id="post_message"></textarea>
							</div>
							<div class="submit-section">
								<button class="btn submit-btn" type="submit" id="post_comment_submit">Submit</button>
							</div>
						</form>
					</div>
				</div> -->
				<!-- /Comment -->

			</div>

			<div class="col-lg-4">
				<div class="sidebar-sec">

					<!-- Video -->
					<div class="video-sec vid-bg">
						<div class="card">
							<div class="card-body">
								<a class="video-thumbnail" id="post_view_video_link" data-fancybox="">
									<video poster="#" controls id="post_view_poster" src="#" playsinline class="responsive-video">
										<!-- You can add other video formats here -->
									</video>
									<!-- Uncomment the following block if you want to include a play icon overlay -->
									<!-- 
									<div class="play-icon">
										<i class="fa-solid fa-play"></i>
									</div>
									-->
								</a>
								<div class="video-details">
									<div class="course-fee">
										<h2 id="post_view_price"></h2>
										<!-- <p>50% off</p> -->
									</div>
									<div class="row gx-2">
										<!-- <div class="col-md-6">
														<a href="course-wishlist.html" class="btn btn-wish w-100"><i class="feather-heart"></i> Add to Wishlist</a>
													</div> -->
										<div class="col-md-6" style="width: 100%;">
											<a href="javascript:void(0);" class="btn btn-wish w-100" id="shareButton"
												style="text-align: center;">
												<i class="feather-share-2"></i> Share
											</a>
										</div>


									</div>
									<!-- <a href="#" class="btn btn-enroll w-100" >Purchase Now</a> -->
								</div>
							</div>
						</div>
					</div>
					<!-- /Video -->

					<!-- Include -->
					<!-- <div class="card include-sec">
									<div class="card-body">
										<div class="cat-title">
											<h4>Includes</h4>
										</div>
										<ul>
											<li><img src="/static/img/icon/import.svg" class="me-2" alt="Img"> 11 hours on-demand video</li>
											<li><img src="/static/img/icon/play.svg" class="me-2" alt="Img"> 69 downloadable resources</li>
											<li><img src="/static/img/icon/key.svg" class="me-2" alt="Img"> Full lifetime access</li>
											<li><img src="/static/img/icon/mobile.svg" class="me-2" alt="Img"> Access on mobile and TV</li>
											<li><img src="/static/img/icon/cloud.svg" class="me-2" alt="Img"> Assignments</li>
											<li><img src="/static/img/icon/teacher.svg" class="me-2" alt="Img"> Certificate of Completion</li>
										</ul>
									</div>
								</div> -->
					<!-- /Include -->

					<!-- Features -->
					<div class="card feature-sec">
						<div class="card-body">
							<div class="cat-title">
								<h4>Highlights</h4>
							</div>
							<ul>
								<!-- <li><img src="/static/img/icon/users.svg" class="me-2" alt="Img"> Purchased By <span>0
									</span></li> -->
								<li><img src="/static/img/icon/timer.svg" class="me-2" alt="Img"> Duration: <span
										id="post_view_video_duration">00 hours</span></li>
										<li><img src="/static/img/icon/chapter.svg" class="me-2" alt="Img"> Format: <span
											id="post_view_video_format"></span></li>
											<!-- <li><img src="/static/img/icon/chart.svg" class="me-2" alt="Img"> Dimensions: <span
												id="post_view_video_dimensions"></span></li> -->
								<!-- <li><img src="/static/img/icon/chapter.svg" class="me-2" alt="Img"> Chapters: <span>15</span></li> -->
								<!-- <li><img src="/static/img/icon/video.svg" class="me-2" alt="Img"> Video:<span> 12 hours</span></li> -->
								<!-- <li><img src="/static/img/icon/chart.svg" class="me-2" alt="Img"> Comments: <span
										id="post_reviews_2"></span></li> -->
							</ul>
						</div>
					</div>
					<!-- /Features -->

				</div>
			</div>
		</div>
	</div>
</section>
<!-- /Pricing Plan -->
{% endblock body %}
{% block script %}
<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script>
	const pathname = window.location.pathname;

	// Split the pathname into parts
	const pathParts = pathname.split('/');

	// Extract the ID (assuming it's the second-to-last part)
	const postId = pathParts[pathParts.length - 2];

	/////////////////////varialibel//////////////////////////////
	post_view_title2 = document.getElementById("post_view_title2")
	post_view_user_profile_link = document.getElementById("post_view_user_profile_link")
	post_view_user_profile_image = document.getElementById("post_view_user_profile_image")
	post_view_short_description = document.getElementById("post_view_short_description")
	post_view_title = document.getElementById("post_view_title")
	post_view_description = document.getElementById("post_view_description")
	post_view_user_link = document.getElementById("post_view_user_link")
	post_view_user_image = document.getElementById("post_view_user_image")
	post_view_price=document.getElementById("post_view_price")

	post_view_user_profile_link_username = document.getElementById("post_view_user_profile_link_username")
	post_view_user_profile_link_username2 = document.getElementById("post_view_user_profile_link_username2")
	post_view_bio = document.getElementById("post_view_bio")



	post_view_poster = document.getElementById("post_view_poster")
	post_view_video = document.getElementById("post_view_video")
	post_view_video_link = document.getElementById("post_view_video_link")
	post_view_video_duration = document.getElementById("post_view_video_duration")


	fetch(`${window.location.origin}/api/upload-video/${postId}/`, {
		"method": "get"
	}).then((response) => {
		return response.json()
	}).then((response) => {
		console.log(response.data)

		if (response.success) {
			let short_description = response.data.description.length > 100
				? `${response.data.description.slice(0, 100)}.....`
				: response.data.description;

			let title = response.data.title.length > 50
				? `${response.data.title.slice(0, 50)}.....`
				: response.data.title;

			console.log(short_description)
			const timestamp = new Date(response.data.created_at);

			// Format the date as "MM/DD/YYYY"
			const formattedDate = timestamp.toLocaleDateString('en-US', {
				month: '2-digit',
				day: '2-digit',
				year: 'numeric'
			});

			// Format the time as "HH:MM AM/PM"
			const formattedTime = timestamp.toLocaleTimeString('en-US', {
				hour: '2-digit',
				minute: '2-digit',
				hour12: true
			});

			//post_view_user_username.innerHTML=response.data.post_view_user_username

			post_view_title2.innerHTML = title

			post_view_bio.innerHTML = response.data.user_bio

			post_view_user_profile_link.href = `/${response.data.user_username}/`

			post_view_user_profile_image.src = `/media/${response.data.user_profile_picture}`
			//post_view_short_description.innerHTML = short_description
			post_view_short_description.style.display = "none"

			post_view_user_image.src = `/media/${response.data.user_profile_picture}`

			post_view_title.innerHTML = response.data.title

			//post_view_price.innerHTML=`$${response.data.price}`

			post_view_description.innerHTML = response.data.description

			post_view_user_link.href = `/${response.data.user_username}/`

			post_view_user_link.src = `/media/${response.data.user_profile_picture}`


			post_view_user_profile_link_username.href = `/${response.data.user_username}/`
			post_view_user_profile_link_username.innerHTML = response.data.user_username

			post_view_user_profile_link_username2.href = `/${response.data.user_username}/`
			post_view_user_profile_link_username2.innerHTML = response.data.user_username


			if (response.data.thumbnail) {
				post_view_poster.poster = `${response.data.thumbnail}`;
			}

			// Check if the video exists and set the video source and link
			const previewElement = document.getElementById('post_view_poster');

			// Create a hidden video element programmatically
			const hiddenVideoElement = document.createElement('video');
			hiddenVideoElement.style.display = 'none';
			document.body.appendChild(hiddenVideoElement);

			if (response.data.preview) {
				// Set the preview
				previewElement.src = `${response.data.video}`;
			//post_view_video_link.href=`${response.data.preview}`

			}

			// Load the full video metadata using the hidden video element
			if (response.data.video) {
				previewElement.src = `${response.data.video}`;
				hiddenVideoElement.src = `${response.data.video}`;

				hiddenVideoElement.addEventListener('loadedmetadata', () => {
					const duration = hiddenVideoElement.duration;
					const width=hiddenVideoElement.videoWidth
					const height=hiddenVideoElement.videoHeight
					const format=hiddenVideoElement.src.split(".").pop()


					// Format the duration to "MM:SS"
					const minutes = Math.floor(duration / 60);
					const seconds = Math.floor(duration % 60);
					const formattedDuration = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

					// Update the DOM element with the formatted duration
					post_view_video_duration.innerHTML = `${formattedDuration}`;
					post_view_video_format.innerHTML = `${format.toUpperCase()}`; // Convert format to uppercase
        			//post_view_video_dimensions.innerHTML = `${width}x${height}`;


					// Optionally, remove the hidden video element if no longer needed
					document.body.removeChild(hiddenVideoElement);
				});
			}
		}
	})
	const player = new Plyr('#post_view_poster', {
		controls: ['play', 'progress', 'current-time', 'fullscreen'],
		i18n: {
			mute: 'Toggle Audio',  // Change the label of the mute button
		}
	});
	
	// Custom function to toggle audio on/off
	const toggleAudio = () => {
		player.muted = !player.muted;  // Toggle mute state
		updateAudioButtonIcon();
	};
	
	// Function to update the icon based on mute state
	const updateAudioButtonIcon = () => {
		if (player.muted) {
			customButton.innerHTML = '<i class="fas fa-volume-mute"></i>';  // Mute icon
		} else {
			customButton.innerHTML = '<i class="fas fa-volume-up"></i>';  // Volume on icon
		}
	};
	
	// Add custom audio on/off button
	const customButton = document.createElement('button');
	customButton.classList.add('plyr__control');  // Apply Plyr control styling
	updateAudioButtonIcon();  // Set the initial icon
	customButton.addEventListener('click', toggleAudio);  // Add toggle function
	
	// Append the custom button to the controls
	const controls = document.querySelector('.plyr__controls');
	controls.appendChild(customButton);
	
	// Share button logic
	document.getElementById('shareButton').addEventListener('click', async () => {
		if (navigator.share) {
			try {
				await navigator.share({
					title: 'Check this out!',
					text: 'Here is a video link for something interesting I found.',
					url: document.getElementById("post_view_poster").src, // Share the current page URL
				});
				console.log('Sharing successful');
			} catch (err) {
				console.error('Error sharing:', err);
			}
		} else {
			// Fallback for browsers that do not support the Web Share API
			alert('Sharing not supported on this browser.');
		}
	});
	
	//document.getElementById("post_view_video_link").onClick(function(e){
	//	console.log("called")
//
	//	window.location.href=`${e.href}`
	//})
	//document.getElementById("post_comment_submit").onclick = async (e) => {
	//	card.style.display = "none";
	//
	//	e.preventDefault()
	//	if (authenticated) {
	//		data = {
	//			"message": document.getElementById("post_message").value,
	//			"post": postId
	//		}
	//		console.log(data)
	//		await fetch(`${window.location.origin}/api/post-review/`, {
	//			"method": "POST",
	//			"headers": {
	//				"content-type": "application/json",
	//				"Authorization": `Bearer ${authenticated}`
	//			},
	//			"body": JSON.stringify(data)
	//		}).then((response) => {
	//			return response.json()
	//		}).then((repsonse) => {
	//			if (repsonse.success) {
	//				card.style.display = "flex";
	//				card.style.borderLeft = "10px solid green";
	//
	//				message_content.innerHTML = repsonse.message;
	//				message_type.innerHTML = "Success";
	//				message_type.style.color = "green";
	//				message_icon_parent.style.color = "green";
	//				message_icon_child.classList = "fas fa-check-circle";
	//				document.getElementById("post_message").value = ""
	//
	//				setTimeout(() => {
	//					card.style.display = "none"
	//				}, 3000)
	//				post_review_get(postId)
	//			}
	//			else {
	//				if (repsonse.message.message) {
	//
	//					message_content.innerHTML = ` <b>Comment</b>:- ${repsonse.message.message[0]}`;
	//				}
	//				else {
	//					message_content.innerHTML = repsonse.message;
	//
	//				}
	//				card.style.display = "flex";
	//				card.style.borderLeft = "10px solid red";
	//				message_type.innerHTML = "Error";
	//				message_type.style.color = "red";
	//				message_icon_parent.style.color = "red";
	//				message_icon_child.classList = "fas fa-times-circle";
	//			}
	//		})
	//
	//	}
	//	else {
	//		message_content.innerHTML = `Login to do comments`;
	//		card.style.display = "flex";
	//		card.style.borderLeft = "10px solid #3db5dc";
	//		message_type.innerHTML = `Info`;
	//		message_type.style.color = "#3db5dc";
	//		message_icon_parent.style.color = "#3db5dc";
	//		message_icon_child.classList = "fas fa-exclamation-circle";
	//
	//		setTimeout(() => {
	//			card.style.display = "none"
	//		}, 2500)
	//	}
	//}
	//
	//async function post_review_get(postID) {
	//	await fetch(`${window.location.origin}/api/post-review/reviews-by-post/?no_pagination=true&post_id=${postID}`, {
	//		method: "GET"
	//	}).then((response) => {
	//		return response.json()
	//	}).then((response) => {
	//		console.log("review", response)
	//		if (response.success) {
	//			console.log(response.data)
	//			str = ``
	//			count = 0
	//			if (response.data.length > 0) {
	//					document.getElementById('main_comments').style.display="block"
	//				response.data.forEach((data) => {
	//					str += `<div class="instructor-wrap" style="border-bottom:none;margin:0px;">
	//						<div class="about-instructor">
	//							<div class="abt-instructor-img">
	//								<a href="instructor-profile.html"><img src="/media/${data.user_profile_picture}" alt="img"
	//										class="img-fluid"></a>
	//							</div>
	//							<div class="instructor-detail">
	//								<h5><a href="/profile/${data.user_username}/">${data.user_username}</a></h5>
	//								<!-- <p>UX/UI Designer</p> -->
	//							</div>
	//						</div>
	//						<ul class="nav">
	//                        <li>
	//                            <a href="/profile/${data.username}/" class="btn btn-success-dark"  style="height: 35px;background: #fae2e0;
	//border: 1px solid #fae2e0;
	//color: #ff4667;">View Profile</a>
	//                        </li>
	//                    </ul>
	//						<!-- <div class="rating">
	//							<i class="fas fa-star filled"></i>
	//							<i class="fas fa-star filled"></i>
	//							<i class="fas fa-star filled"></i>
	//							<i class="fas fa-star filled"></i>
	//							<i class="fas fa-star"></i>
	//							<span class="d-inline-block average-rating">4.5 Instructor Rating</span>
	//						</div> -->
	//					</div>
	//					<p class="rev-info">“ ${data.message} “</p>
	//					<hr>
	//					<!-- <a href="javascript:void(0);" class="btn btn-reply"><i class="feather-corner-up-left"></i>
	//						Reply</a> -->
	//
	//						`
	//
	//					count = count + 1
	//				})
	//				document.getElementById('post_reviews').innerHTML = str
	//				document.getElementById('reviews_count').innerHTML = count
	//				document.getElementById('post_reviews_2').innerHTML = count
	//
	//
	//			} else {
	//				document.getElementById('main_comments').style.display="none"
	//			}
	//
	//		} else {
	//
	//			message_content.innerHTML = "Oops ! Problem while getting comments";
	//
	//			card.style.display = "flex";
	//			card.style.borderLeft = "10px solid red";
	//			message_type.innerHTML = "Error";
	//			message_type.style.color = "red";
	//			message_icon_parent.style.color = "red";
	//			message_icon_child.classList = "fas fa-times-circle";
	//
	//			setTimeout((repsonse) => {
	//				card.style.display = "none"
	//			}, 2000)
	//		}
	//
	//	})
	//}
	//post_review_get(postId)


</script>
{% endblock script %}